import re
from django.http import HttpResponse
from django.shortcuts import redirect, render
from .models import Project
from .forms import Links, ProjectName

# Create your views here.


def index(request):


    return render(request, 'index.html')

def projects(request):

    projects = Project.objects.all()
    return render(request, 'projects.html', {'projects':projects})

def create_project(request):

    form = ProjectName(request.POST or None)

    if request.method == 'GET':
        
        context = {
            'form':form,
        }

        return render(request, 'projectinput.html', context)
    elif request.method =='POST':

        if form.is_valid():
            form.save()

        return redirect('core:index')


def subdomain_enumarotor(request):

    form = Links(request.POST or None)

    if request.method == 'GET':
        context = {
                'form':form,
            }
        return render(request, 'enumarator.html',context)

    else:
        if form.is_valid():
            print(form.errors)
            links = form.cleaned_data['links']
            # print(links.split('\n'))
            # a = links.split('\n')
            # nl = []
            # for item in a:
            #     nl.append(item.strip('\r'))
            # print(nl)

            form.save()

        return redirect('core:index')

    